## Linux系统需要备份的数据
### 系统备份
`
/root/  /home  /etc/  /root  /boot  /usr/local  自定义目录
`
### apache需要备份的数据
* 配置文件
* 网页主目录
* 日志文件   

### mysql需要备份的数据
* 源码安装需要备份的目录：/usr/local/mysql、 数据目录
* rpm包安装的mysql ： /var/lib/mysql
 
## 备份测略
### 1.完全备份：把所有需要备份的数据全部备份，这样比较慢，恢复起来也比较慢
### 2.增量备份：每天只备份新增的部分，这样备份最快，缺点是恢复的时候比较麻烦，需要一步一步往回恢复
![](http://i.imgur.com/0hqeFeW.png)
### 3.差异备份 :这种效率介于上面两者之间
![](http://i.imgur.com/ezvyNh2.png)
 
## 命令工具
### dump命令
```
dump 选项 备份之后的文件名 原文件或目录 
选项： 
-level：0到9十个备份级别（增加备份） 
-f 文件名：指定备份之后的文件名 
-u ：备份成功之后，把备份时间记录在/etc/dumpdates文件 
-v：显示备份过程中更多的输出信息 
-j：压缩为.bz2格式， 
-W：显示运行被dump的分区的备份等级和备份时间 
``` 
###  restore命令 
```
restore 模式选项 -f  
模式选项：restore常用的模式选项有一下4种，这4个模式不能混用 
-C:比较备份数据与实际数据的变化
-i:进入交互模式，手工选择需要还原的文件 
-t:查看备份文件中有哪些数据 
-r: 用于还原数据
```
### rsync
```
rsync -av 源目录 目标目录
```

## 开源备份软件 
### 1.给企业选择备份软件的时候应该注意以下几点：
* 1.开源软件：你必须使用那些源代码可以被自由修改的软件。这样即使项目停止了或者没有补丁更新也可以确保你能恢复数据。
* 2.跨平台支持：确保备份软件可以在各种桌面和服务器操作系统上工作。
* 3.数据格式：开放的数据格式可以确保你能在项目组停止软件更新后恢复你的数据.
* 4.备份介质：确保你可以备份到磁带，磁盘，DVD和类似AWS的云存储上。
* 5.加密数据流：确保所有在LAN/WAN/internet上的客户端到服务端通信流量都被加密了。
*  6.数据库支持：确保备份软件可以备份MySQL或者Oracle等的数据库。
*  7.重复数据删除：这是一个为了消除重复数据的压缩技术(比如，图片)。
*  8.授权和费用：确保你理解那些你正在使用的软件遵循的开源软件协议。
*  9.社区支持：开源软件可以提供基础社区(邮件列表和论坛)或者专业技术支持(付费订阅)。你可以使用付费服务来达到培训或者咨询的目的。
*  报告和警报：最后，你必须能够查看备份报告，当前的任务状态，当备份的时候出现错误要能够得到警报。
### 2. backuppc

* 基于上述要求，这里推荐Bakuppc 备份软件。
* BackupPC是一款Linux平台下的一款非常灵活的开源系统系统备份工具，该工具是一种D2D的备份解决方案，BackupPC只能运行在Linux平台上，但是却可以同时备份windows，Linux，,Mac os等多种平台的系统，采取独有的压缩算法，以及单例（single-instance）存储方式，大大提高了存储池的利用率，节省了系统开支。
* 支持web操作界面，简单易懂，亦支持备份告警邮件。
